(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{8216:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return t(1332)}])},1332:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return y}});var a=t(5893),s=t(7294),r=t(7462),n=t(4829),i=t(6010),c=t(8459),o=t(8935),d=t(2519),p=t(2248);function u(e){var l=e.children,t=e.className,a=(0,i.Z)(t),n=(0,o.Z)(u,e),c=(0,d.Z)(u,e);return s.createElement(c,(0,r.Z)({},n,{className:a}),l)}u.handledProps=["as","children","className"],u.defaultProps={as:"tbody"},u.propTypes={};var h=t(8842),m=t(5150);function v(e){var l=e.active,t=e.children,a=e.className,n=e.collapsing,u=e.content,h=e.disabled,f=e.error,g=e.icon,Z=e.negative,x=e.positive,b=e.selectable,w=e.singleLine,j=e.textAlign,G=e.verticalAlign,A=e.warning,N=e.width,k=(0,i.Z)((0,c.lG)(l,"active"),(0,c.lG)(n,"collapsing"),(0,c.lG)(h,"disabled"),(0,c.lG)(f,"error"),(0,c.lG)(Z,"negative"),(0,c.lG)(x,"positive"),(0,c.lG)(b,"selectable"),(0,c.lG)(w,"single line"),(0,c.lG)(A,"warning"),(0,c.X4)(j),(0,c.Ok)(G),(0,c.H0)(N,"wide"),a),y=(0,o.Z)(v,e),E=(0,d.Z)(v,e);return p.kK(t)?s.createElement(E,(0,r.Z)({},y,{className:k}),m.Z.create(g),u):s.createElement(E,(0,r.Z)({},y,{className:k}),t)}function f(e){var l=e.children,t=e.className,a=e.content,n=e.fullWidth,u=(0,i.Z)((0,c.lG)(n,"full-width"),t),h=(0,o.Z)(f,e),m=(0,d.Z)(f,e);return s.createElement(m,(0,r.Z)({},h,{className:u}),p.kK(l)?a:l)}function g(e){var l=e.as,t=(0,o.Z)(g,e);return s.createElement(f,(0,r.Z)({},t,{as:l}))}function Z(e){var l=e.as,t=e.className,a=e.sorted,n=(0,i.Z)((0,c.cD)(a,"sorted"),t),d=(0,o.Z)(Z,e);return s.createElement(v,(0,r.Z)({},d,{as:l,className:n}))}function x(e){var l=e.active,t=e.cellAs,a=e.cells,u=e.children,h=e.className,m=e.disabled,f=e.error,g=e.negative,Z=e.positive,b=e.textAlign,w=e.verticalAlign,j=e.warning,G=(0,i.Z)((0,c.lG)(l,"active"),(0,c.lG)(m,"disabled"),(0,c.lG)(f,"error"),(0,c.lG)(g,"negative"),(0,c.lG)(Z,"positive"),(0,c.lG)(j,"warning"),(0,c.X4)(b),(0,c.Ok)(w),h),A=(0,o.Z)(x,e),N=(0,d.Z)(x,e);return p.kK(u)?s.createElement(N,(0,r.Z)({},A,{className:G}),(0,n.Z)(a,function(e){return v.create(e,{defaultProps:{as:t}})})):s.createElement(N,(0,r.Z)({},A,{className:G}),u)}function b(e){var l=e.attached,t=e.basic,a=e.celled,h=e.children,m=e.className,v=e.collapsing,Z=e.color,w=e.columns,j=e.compact,G=e.definition,A=e.fixed,N=e.footerRow,k=e.headerRow,y=e.headerRows,E=e.inverted,P=e.padded,R=e.renderBodyRow,C=e.selectable,_=e.singleLine,q=e.size,T=e.sortable,z=e.stackable,F=e.striped,B=e.structured,D=e.tableData,L=e.textAlign,O=e.unstackable,X=e.verticalAlign,H=(0,i.Z)("ui",Z,q,(0,c.lG)(a,"celled"),(0,c.lG)(v,"collapsing"),(0,c.lG)(G,"definition"),(0,c.lG)(A,"fixed"),(0,c.lG)(E,"inverted"),(0,c.lG)(C,"selectable"),(0,c.lG)(_,"single line"),(0,c.lG)(T,"sortable"),(0,c.lG)(z,"stackable"),(0,c.lG)(F,"striped"),(0,c.lG)(B,"structured"),(0,c.lG)(O,"unstackable"),(0,c.sU)(l,"attached"),(0,c.sU)(t,"basic"),(0,c.sU)(j,"compact"),(0,c.sU)(P,"padded"),(0,c.X4)(L),(0,c.Ok)(X),(0,c.H0)(w,"column"),"table",m),K=(0,o.Z)(b,e),U=(0,d.Z)(b,e);if(!p.kK(h))return s.createElement(U,(0,r.Z)({},K,{className:H}),h);var S={defaultProps:{cellAs:"th"}},W=(k||y)&&s.createElement(f,null,x.create(k,S),(0,n.Z)(y,function(e){return x.create(e,S)}));return s.createElement(U,(0,r.Z)({},K,{className:H}),W,s.createElement(u,null,R&&(0,n.Z)(D,function(e,l){return x.create(R(e,l))})),N&&s.createElement(g,null,x.create(N)))}v.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],v.defaultProps={as:"td"},v.propTypes={},v.create=(0,h.u5)(v,function(e){return{content:e}}),f.handledProps=["as","children","className","content","fullWidth"],f.defaultProps={as:"thead"},f.propTypes={},g.handledProps=["as"],g.propTypes={},g.defaultProps={as:"tfoot"},Z.handledProps=["as","className","sorted"],Z.propTypes={},Z.defaultProps={as:"th"},x.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],x.defaultProps={as:"tr",cellAs:"td"},x.propTypes={},x.create=(0,h.u5)(x,function(e){return{cells:e}}),b.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],b.defaultProps={as:"table"},b.propTypes={},b.Body=u,b.Cell=v,b.Footer=g,b.Header=f,b.HeaderCell=Z,b.Row=x;var w=t(967),j=t(203),G=t(9261),A=t(8316),N=t(2932),k=e=>{onApprove=async()=>{let e=(0,A.Z)((void 0).props.address),l=await N.Z.eth.getAccounts();await e.methods.approveRequest((void 0).props.id).send({from:l[0]})},onFinalize=async()=>{let e=(0,A.Z)((void 0).props.address),l=await N.Z.eth.getAccounts();await e.methods.finalizeRequest((void 0).props.id).send({from:l[0]})};let{Row:l,Cell:t}=b,{id:s,request:r,approversCount:n}=(void 0).props,i=r.approvalCount>n/2;return(0,a.jsxs)(l,{disabled:r.complete,positive:i&&!r.complete,children:[(0,a.jsx)(t,{children:s}),(0,a.jsx)(t,{children:r.description}),(0,a.jsx)(t,{children:N.Z.utils.fromWei(r.value,"ether")}),(0,a.jsx)(t,{children:r.recipient}),(0,a.jsxs)(t,{children:[r.approvalCount,"/",n]}),(0,a.jsx)(t,{children:r.complete?null:(0,a.jsx)(w.Z,{color:"green",basic:!0,onClick:(void 0).onApprove,children:"Approve"})}),(0,a.jsx)(t,{children:r.complete?null:(0,a.jsx)(w.Z,{color:"teal",basic:!0,onClick:(void 0).onFinalize,children:"Finalize"})})]})},y=e=>{let[l,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(0),[i,c]=(0,s.useState)(0);(0,s.useEffect)(()=>{(async()=>{var l;let{address:a}=null!==(l=e.query)&&void 0!==l?l:{};if(!a)return;let s=(0,A.Z)(a),r=await s.methods.getRequestsCount().call(),i=await s.methods.approversCount().call();t(await Promise.all(Array(parseInt(r)).fill().map((e,l)=>s.methods.requests(l).call()))),n(r),c(i)})()},[]);let{Header:o,Row:d,HeaderCell:p,Body:u}=b;return(0,a.jsxs)(G.Z,{children:[(0,a.jsx)("h3",{children:"Requests"}),(0,a.jsx)(j.Link,{legacyBehavior:!0,route:"/campaigns/".concat(e.address,"/requests/new"),children:(0,a.jsx)("a",{children:(0,a.jsx)(w.Z,{primary:!0,floated:"right",style:{marginBottom:10},children:"Add Request"})})}),(0,a.jsxs)(b,{children:[(0,a.jsx)(o,{children:(0,a.jsxs)(d,{children:[(0,a.jsx)(p,{children:"ID"}),(0,a.jsx)(p,{children:"Description"}),(0,a.jsx)(p,{children:"Amount"}),(0,a.jsx)(p,{children:"Recipient"}),(0,a.jsx)(p,{children:"Approval Count"}),(0,a.jsx)(p,{children:"Approve"}),(0,a.jsx)(p,{children:"Finalize"})]})}),(0,a.jsx)(u,{children:l.map((l,t)=>(0,a.jsx)(k,{id:t,request:l,address:e.address,approversCount:i},t))})]}),(0,a.jsxs)("div",{children:["Found ",r," requests."]})]})}}},function(e){e.O(0,[543,810,480,888,774,179],function(){return e(e.s=8216)}),_N_E=e.O()}]);